<!DOCTYPE html>
<html lang="sv-se">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://kit.fontawesome.com/6a0526b489.js" crossorigin="anonymous"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <link rel="icon" href="/images/freakyfashion-icon-32x32.png" sizes="32x32">
    <link rel="stylesheet" href="/stylesheets/site.min.css">
    <title>Administration</title>
</head>

<body>

    <!-- header section -->
    <%- include("../../partials/admin-header") %>

    <!-- main section -->
    <main>

        <section id="edit-category">

            <%- include("../../partials/admin-sidebar") %>

            <div class="content">

                <form class="edit-category-form" id="edit-category-form" action="#" method="post">

                    <div class="form-group name">
                        <label for="name">Namn</label>
                        <input type="text" id="name" name="name" value="<%= category.name %>" maxlength="50" required>
                    </div>

                    <div class="form-group image-url">
                        <label for="image-url">Bild</label>
                        <input type="url" id="image-url" name="image_url" value="<%= category.image_url %>" required>
                    </div>

                    <div class="form-group url-slug">
                        <label for="slug">URL-Slug</label>
                        <input 
                            type="text" 
                            id="slug" 
                            name="slug" 
                            value="<%= category.slug %>"
                            pattern="^[a-z0-9-]+$"
                            title="Endast små bokstäver, siffror och bindestreck är tillåtna"
                            required>
                    </div>

                    <div class="products-container">

                        <fieldset class="products-fieldset">
                            <h3>Produkter</h3>
                            
                            <div class="form-group sku">
                                <input
                                    type="text"
                                    id="sku"
                                    name="sku"
                                    pattern="^[A-Za-z]{3}[0-9]{3}$"
                                    title="SKU måste vara i formatet XXXYYY, där X är bokstäver och Y är siffror (t.ex. ABC123)"
                                    placeholder="Lägg till SKU">
                            </div>

                            <div class="categories-view">
    
                                <div class="category-details">
                                    <h6>Namn</h6>
                                    <% category.products.forEach(product => { %>
                                        <p>
                                            <a href="/admin/products/<%= product.id %>"><%= product.name %></a>
                                        </p>
                                    <% }) %>
                                </div>
                                <div class="category-details">
                                    <h6>SKU</h6>
                                    <% category.products.forEach(product => { %>
                                        <p><%= product.sku %></p>
                                    <% }) %>
                                </div>
                                <div class="category-details">
                                    <h6></h6>
                                    <% category.products.forEach(product => { %>
                                        <button class="delete-btn" data-id="<%= product.id %>">
                                            <i class="fa-solid fa-trash-can"></i>
                                        </button>
                                    <% }) %>
                                </div>

                            </div>
                    
                        </fieldset>

                    </div>
                    
                    <div class="btn-submit">
                        <button class="btn-theme" type="submit">Spara</button>
                    </div>
                      
                </form>

            </div>

        </section>

    </main>

    <script src="/js/edit-category.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>